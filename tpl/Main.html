[bodyEntry: Body* $body]
	{if $body->type == Body_Type_Paragraph}
		<p>{for $entry in $body->nodes}{block bodyEntry $entry}{end}</p>
	{else $body->type == Body_Type_Block}
		{if $body->block.type == Body_BlockType_Note}
			<p class="note">
		{else}
			<p class="warning">
		{end}

		{for $entry in $body->nodes}{block bodyEntry $entry}{end}</p>
	{else $body->type == Body_Type_List}
		<ul>{for $entry in $body->nodes}{block bodyEntry $entry}{end}</ul>
	{else $body->type == Body_Type_ListItem}
		<li>{for $entry in $body->nodes}{block bodyEntry $entry}{end}</li>
	{else $body->type == Body_Type_Url}
		<a href="{$body->url.url}">{for $entry in $body->nodes}{block bodyEntry $entry}{end}</a>
	{else $body->type == Body_Type_Text}
		{pass TemplateHelper_PrintStyled $body->text.style, $body->text.value}
	{else $body->type == Body_Type_Command}
		<script type="syntaxhighlighter" class="brush: shell"><!\[CDATA\[{$body->command.value}]]></script>
	{else $body->type == Body_Type_Code}
		<script type="syntaxhighlighter" class="brush: c"><!\[CDATA\[{$body->code.value}]]></script>
	{else $body->type == Body_Type_Mail}
		<a href="mailto:{$body->mail.addr}">{for $entry in $body->nodes}{block bodyEntry $entry}{end}</a>
	{else $body->type == Body_Type_Anchor}
		<a name="{$body->anchor.name}"></a>
	{else $body->type == Body_Type_Jump}
		<a href="#{$body->jump.anchor}">{for $entry in $body->nodes}{block bodyEntry $entry}{end}</a>
	{else $body->type == Body_Type_Image}
		<img src="{$body->image.path}" />
	{end}
[end]

<head>
	<title>{#doc->title}</title>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

	<script type="text/javascript" src="{#base}/syntaxhighlighter/scripts/XRegExp.js"></script>
	<script type="text/javascript" src="{#base}/syntaxhighlighter/scripts/shCore.js"></script>
	<script type="text/javascript" src="{#base}/syntaxhighlighter/scripts/shBrushCpp.js"></script>
	<script type="text/javascript" src="{#base}/syntaxhighlighter/scripts/shBrushBash.js"></script>

	<link href="{#base}/syntaxhighlighter/styles/shCore.css"         rel="stylesheet" type="text/css" />
	<link href="{#base}/syntaxhighlighter/styles/shThemeDefault.css" rel="stylesheet" type="text/css" />

	<script type="text/javascript">
		 SyntaxHighlighter.all()
	</script>

	<link href="{#base}/style.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<h1>{#doc->title}</h1>

	<h2><a href="#toc" name="toc">Table of Contents</a></h2>
	<ul>
		{for $chapter in #doc->chapters}
			<li><a href="#{$chapter->title}">{$chapter->title}</a><br /></li>
		{end}
	</ul>

	{for $chapter in #doc->chapters}
		<h2><a href="#{$chapter->title}" name="{$chapter->title}">{$chapter->title}</a></h2>

		{for $body in $chapter->body.nodes}
			{block bodyEntry $body}
		{end}

		{for $section in $chapter->sections}
			<h3>{pass html $section->title}</h3>

			{for $body in $section->body.nodes}
				{block bodyEntry $body}
			{end}
		{end}
	{end}
</body>
